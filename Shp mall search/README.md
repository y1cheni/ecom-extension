# Shopee 商城搜索爬蟲 Chrome 插件

一個專門用於批量抓取Shopee商城搜索結果的Chrome瀏覽器插件。

## 功能特色

- 📦 **批量處理**: 支持同時處理多個Shopee商城搜索連結
- 🔄 **自動翻頁**: 自動翻頁直到沒有更多商品
- 🎯 **精確抓取**: 抓取品牌、商店ID、商品名稱和商品連結
- 💾 **持久存儲**: 資料自動保存，關閉插件也不會遺失
- 📊 **CSV匯出**: 支持將抓取的資料匯出為CSV文件
- 🚀 **智能檢測**: 自動檢測"此賣場未找到任何商品"並跳過

## 安裝方法

1. 下載或克隆此專案到本地
2. 打開Chrome瀏覽器，進入 `chrome://extensions/`
3. 開啟"開發者模式"（右上角開關）
4. 點擊"載入未封裝項目"
5. 選擇插件所在的資料夾
6. 插件安裝完成，會在工具列顯示插件圖標

## 使用方法

### 準備連結格式
插件支持以下格式的Shopee商城搜索連結：
```
https://shopee.tw/mall/search?keyword=品牌名&page=0&shop=商店ID
```

例如：
```
https://shopee.tw/mall/search?keyword=KOIKEYA%20%E6%B9%96%E6%B1%A0%E5%B1%8B&page=0&shop=6440668
https://shopee.tw/mall/search?keyword=Naeiae&page=0&shop=21507356
```

### 操作步驟

1. **輸入連結**: 點擊插件圖標，在彈出視窗的文字框中貼上連結，每行一個
2. **開始抓取**: 點擊"開始抓取"按鈕
3. **即時監控**: 觀察抓取進度和狀態更新
4. **查看資料**: 在插件視窗中查看已抓取的商品資料預覽
5. **匯出資料**: 完成後點擊"匯出CSV"將資料保存到本地

### 抓取邏輯

插件會依照以下邏輯進行抓取：

1. **依序處理**: 按順序處理每個輸入的連結
2. **從第0頁開始**: 每個連結都從page=0開始抓取
3. **自動翻頁**: 
   - 如果發現商品，繼續抓取下一頁 (page+1)
   - 如果發現"此賣場未找到任何商品"，跳到下一個連結
4. **資料收集**: 每頁抓取所有可見的商品資訊

## 抓取的資料欄位

| 欄位名稱 | 說明 | 來源 |
|---------|------|------|
| 品牌 | 品牌名稱 | URL中keyword參數解碼後的值 |
| 商店ID | 商店識別碼 | URL中shop參數的值 |
| 商品名稱 | 商品標題 | 網頁中的商品標題文字 |
| 商品連結 | 商品詳情頁面連結 | 網頁中商品的超連結 |

## 注意事項

- ⚠️ **網路連接**: 確保網路連接穩定，抓取過程中避免斷網
- ⚠️ **頁面干擾**: 抓取過程中請勿手動操作瀏覽器標籤頁
- ⚠️ **合理使用**: 請合理使用此工具，避免對網站造成過大負擔
- ⚠️ **資料備份**: 建議定期匯出CSV備份重要資料

## 技術說明

### 檔案結構
```
├── manifest.json      # 插件配置文件
├── popup.html         # 彈出界面HTML
├── popup.js           # 彈出界面邏輯
├── styles.css         # 界面樣式
├── content.js         # 網頁內容抓取腳本
├── background.js      # 背景服務腳本
├── icons/            # 插件圖標目錄
└── README.md         # 說明文件
```

### 主要技術
- **Chrome Extension API**: 插件核心功能
- **XPath選擇器**: 精確定位網頁元素
- **Chrome Storage API**: 本地資料存儲
- **異步處理**: 非阻塞的抓取流程
- **CSV生成**: 支援UTF-8編碼的CSV匯出

## 疑難排解

### 常見問題

**Q: 插件無法載入？**
A: 確保已開啟開發者模式，並檢查所有文件是否完整

**Q: 抓取不到商品？**  
A: 檢查連結格式是否正確，確保是有效的Shopee商城搜索連結

**Q: 抓取中途停止？**
A: 檢查網路連接，或嘗試重新開始抓取任務

**Q: 匯出的CSV中文亂碼？**
A: 使用支援UTF-8編碼的軟體（如Excel 2016+）開啟CSV檔案

### 調試方法
1. 打開Chrome開發者工具 (F12)
2. 切換到Console標籤
3. 查看錯誤訊息和調試資訊
4. 檢查Network標籤的網路請求狀態

## 更新日誌

### v1.0.0 (2024-01-01)
- 初始版本發布
- 支援批量抓取Shopee商城搜索結果
- 實現自動翻頁功能
- 支援CSV匯出
- 資料持久化存儲

## 授權聲明

本專案僅供學習和研究使用。使用者需要遵守相關網站的使用條款和robots.txt規則。

---

如有問題或建議，請聯繫開發者。
