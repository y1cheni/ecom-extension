# 🔍 除錯指南 - 自動翻頁問題診斷

## 📋 測試步驟

### 1. 重新載入擴充功能
- 前往 `chrome://extensions/`
- 找到「Momo 商品搜尋助手」
- 點擊重新載入按鈕

### 2. 開啟兩個 Console 視窗

#### A. Popup Console (擴充功能彈出視窗)
1. 點擊擴充功能圖示開啟 popup
2. 在 popup 視窗上按右鍵 → 檢查
3. 在 DevTools 的 Console 分頁查看日誌

#### B. Content Script Console (Momo 網站頁面)
1. 點擊「開始搜尋」，等待 Momo 頁面開啟
2. 在 Momo 頁面按 F12
3. 在 DevTools 的 Console 分頁查看日誌

### 3. 觀察日誌訊息

#### 🎯 預期的 Content Script 日誌 (Momo 頁面)：
```
開始提取商品資訊...
當前頁面: 第 1 頁
❌ 沒有找到結束標記，繼續搜尋
選擇器 ".goodsUrl" 找到 30 個元素
處理 30 個 ".goodsUrl" 元素
✅ 成功提取商品: 【Logitech 羅技】MX Master...
第 1 頁找到 30 個商品
🚀 準備發送 PAGE_COMPLETED 訊息: page=1, count=30
📤 發送訊息: {type: "PRODUCTS_FOUND", products: [...]}
✅ 訊息發送成功
📤 發送訊息: {type: "PAGE_COMPLETED", page: 1, count: 30, hasNextPage: true}
✅ 訊息發送成功
```

#### 🎯 預期的 Popup 日誌 (擴充功能視窗)：
```
📥 收到訊息: {type: "PRODUCTS_FOUND", products: [...]}
🔄 處理訊息類型: PRODUCTS_FOUND
📦 收到 30 個商品
📥 收到訊息: {type: "PAGE_COMPLETED", page: 1, count: 30, hasNextPage: true}
🔄 處理訊息類型: PAGE_COMPLETED
✅ 第 1 頁完成，商品數: 30, 是否有下一頁: true
⏰ 設定 3 秒後翻頁到第 2 頁
🔄 翻頁到第 2 頁: https://www.momoshop.com.tw/search/searchShop.jsp?keyword=Logitech&_isFuzzy=0&searchType=1&curPage=2
```

## 🐛 常見問題診斷

### 問題 1: Content Script 沒有日誌
**症狀**: Momo 頁面的 Console 完全沒有我們的日誌
**原因**: Content Script 沒有注入或者載入失敗
**解決**: 重新載入擴充功能，確認 manifest.json 正確

### 問題 2: 有商品提取日誌，但沒有發送訊息
**症狀**: 看到商品提取成功，但沒有「📤 發送訊息」
**原因**: sendMessage 函數有問題
**解決**: 檢查 Chrome 錯誤日誌

### 問題 3: 發送了訊息，但 Popup 沒收到
**症狀**: Content Script 顯示「✅ 訊息發送成功」，但 Popup Console 沒有「📥 收到訊息」
**原因**: 訊息傳遞失敗或 Popup 沒有正確監聽
**解決**: 確認 Popup 是否開啟，重新開啟 Popup

### 問題 4: Popup 收到訊息但沒有翻頁
**症狀**: 看到「⏰ 設定 3 秒後翻頁」但沒有「🔄 翻頁到第 2 頁」
**原因**: setTimeout 或 goToNextPage 函數有問題
**解決**: 檢查是否有 JavaScript 錯誤

## 📞 回報格式

請複製以下兩個 Console 的完整日誌：

### Content Script Console (Momo 頁面):
```
[請貼上 Momo 頁面 Console 的完整日誌]
```

### Popup Console (擴充功能視窗):
```
[請貼上 Popup Console 的完整日誌]
```

## 🎯 預期行為

正常情況下應該看到：
1. ✅ 第 1 頁提取 30 個商品
2. ⏰ 3 秒倒計時
3. 🔄 自動跳轉到第 2 頁
4. ✅ 第 2 頁提取更多商品
5. 🔄 繼續翻頁...
6. 🚫 直到找到「沒有篩選到」為止 